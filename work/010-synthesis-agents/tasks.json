{
  "version": "1.0.0",
  "stream_id": "010-synthesis-agents",
  "last_updated": "2026-01-23T22:51:18.352Z",
  "tasks": [
    {
      "id": "01.01.01.01",
      "name": "Add `SynthesisAgentDefinitionYaml` interface to types.ts with fields matching `AgentDefinitionYaml` structure (name, description, best_for, models)",
      "stage_name": "Foundation",
      "batch_name": "Type Definitions",
      "thread_name": "Types and Schema",
      "status": "pending",
      "created_at": "2026-01-23T22:51:18.350Z",
      "updated_at": "2026-01-23T22:51:18.350Z",
      "assigned_agent": "systems-engineer"
    },
    {
      "id": "01.01.01.02",
      "name": "Extend `AgentsConfigYaml` interface to include optional `synthesis_agents?: SynthesisAgentDefinitionYaml[]` field",
      "stage_name": "Foundation",
      "batch_name": "Type Definitions",
      "thread_name": "Types and Schema",
      "status": "pending",
      "created_at": "2026-01-23T22:51:18.350Z",
      "updated_at": "2026-01-23T22:51:18.350Z",
      "assigned_agent": "systems-engineer"
    },
    {
      "id": "01.01.01.03",
      "name": "Add `synthesisOutput?: string` field to `ThreadMetadata` interface for storing synthesis summaries",
      "stage_name": "Foundation",
      "batch_name": "Type Definitions",
      "thread_name": "Types and Schema",
      "status": "pending",
      "created_at": "2026-01-23T22:51:18.350Z",
      "updated_at": "2026-01-23T22:51:18.350Z",
      "assigned_agent": "systems-engineer"
    },
    {
      "id": "01.01.01.04",
      "name": "Add `workingAgentSessionId?: string` field to `ThreadMetadata` to track the working agent's opencode session separately from the outer synthesis session",
      "stage_name": "Foundation",
      "batch_name": "Type Definitions",
      "thread_name": "Types and Schema",
      "status": "pending",
      "created_at": "2026-01-23T22:51:18.350Z",
      "updated_at": "2026-01-23T22:51:18.350Z",
      "assigned_agent": "systems-engineer"
    },
    {
      "id": "01.01.01.05",
      "name": "Add JSDoc comments explaining the distinction between `opencodeSessionId` (outermost agent), `workingAgentSessionId` (inner working agent), and `currentSessionId` (internal tracking)",
      "stage_name": "Foundation",
      "batch_name": "Type Definitions",
      "thread_name": "Types and Schema",
      "status": "pending",
      "created_at": "2026-01-23T22:51:18.350Z",
      "updated_at": "2026-01-23T22:51:18.350Z",
      "assigned_agent": "systems-engineer"
    },
    {
      "id": "01.02.01.01",
      "name": "Extend `parseAgentsYaml()` function in agents-yaml.ts to parse the `synthesis_agents` array from agents.yaml",
      "stage_name": "Foundation",
      "batch_name": "Parser, Skill, and Session Capacity",
      "thread_name": "YAML Parser Extension",
      "status": "pending",
      "created_at": "2026-01-23T22:51:18.350Z",
      "updated_at": "2026-01-23T22:51:18.350Z",
      "assigned_agent": "systems-engineer"
    },
    {
      "id": "01.02.01.02",
      "name": "Add `getSynthesisAgent(name: string)` function to retrieve a synthesis agent by name, returning null if not found",
      "stage_name": "Foundation",
      "batch_name": "Parser, Skill, and Session Capacity",
      "thread_name": "YAML Parser Extension",
      "status": "pending",
      "created_at": "2026-01-23T22:51:18.350Z",
      "updated_at": "2026-01-23T22:51:18.350Z",
      "assigned_agent": "systems-engineer"
    },
    {
      "id": "01.02.01.03",
      "name": "Add `getDefaultSynthesisAgent()` function to return the first synthesis agent from config or null if none defined",
      "stage_name": "Foundation",
      "batch_name": "Parser, Skill, and Session Capacity",
      "thread_name": "YAML Parser Extension",
      "status": "pending",
      "created_at": "2026-01-23T22:51:18.350Z",
      "updated_at": "2026-01-23T22:51:18.350Z",
      "assigned_agent": "systems-engineer"
    },
    {
      "id": "01.02.01.04",
      "name": "Apply the same model validation logic used for regular agents to synthesis agent models",
      "stage_name": "Foundation",
      "batch_name": "Parser, Skill, and Session Capacity",
      "thread_name": "YAML Parser Extension",
      "status": "pending",
      "created_at": "2026-01-23T22:51:18.350Z",
      "updated_at": "2026-01-23T22:51:18.350Z",
      "assigned_agent": "systems-engineer"
    },
    {
      "id": "01.02.02.01",
      "name": "Create directory and file at `~/.config/opencode/skills/synthesizing-workstreams/SKILL.md`",
      "stage_name": "Foundation",
      "batch_name": "Parser, Skill, and Session Capacity",
      "thread_name": "Create Synthesizing Skill",
      "status": "pending",
      "created_at": "2026-01-23T22:51:18.350Z",
      "updated_at": "2026-01-23T22:51:18.350Z",
      "assigned_agent": "documentation-minimalist"
    },
    {
      "id": "01.02.02.02",
      "name": "Write skill instructions for running the provided opencode command to execute the working agent",
      "stage_name": "Foundation",
      "batch_name": "Parser, Skill, and Session Capacity",
      "thread_name": "Create Synthesizing Skill",
      "status": "pending",
      "created_at": "2026-01-23T22:51:18.350Z",
      "updated_at": "2026-01-23T22:51:18.350Z",
      "assigned_agent": "documentation-minimalist"
    },
    {
      "id": "01.02.02.03",
      "name": "Add guidance for reviewing session output and generating concise 2-3 sentence summaries focusing on what was done, key changes, and any issues",
      "stage_name": "Foundation",
      "batch_name": "Parser, Skill, and Session Capacity",
      "thread_name": "Create Synthesizing Skill",
      "status": "pending",
      "created_at": "2026-01-23T22:51:18.350Z",
      "updated_at": "2026-01-23T22:51:18.350Z",
      "assigned_agent": "documentation-minimalist"
    },
    {
      "id": "01.02.02.04",
      "name": "Define a specific output format for the synthesis summary that can be parsed programmatically",
      "stage_name": "Foundation",
      "batch_name": "Parser, Skill, and Session Capacity",
      "thread_name": "Create Synthesizing Skill",
      "status": "pending",
      "created_at": "2026-01-23T22:51:18.350Z",
      "updated_at": "2026-01-23T22:51:18.350Z",
      "assigned_agent": "documentation-minimalist"
    },
    {
      "id": "01.02.02.05",
      "name": "Test that the skill loads correctly with opencode's skill loader",
      "stage_name": "Foundation",
      "batch_name": "Parser, Skill, and Session Capacity",
      "thread_name": "Create Synthesizing Skill",
      "status": "pending",
      "created_at": "2026-01-23T22:51:18.350Z",
      "updated_at": "2026-01-23T22:51:18.350Z",
      "assigned_agent": "documentation-minimalist"
    },
    {
      "id": "01.02.03.01",
      "name": "Locate `--max-count 10` in `buildRunCommand()` function in opencode.ts and change to `--max-count 20`",
      "stage_name": "Foundation",
      "batch_name": "Parser, Skill, and Session Capacity",
      "thread_name": "Double Session Listing",
      "status": "pending",
      "created_at": "2026-01-23T22:51:18.350Z",
      "updated_at": "2026-01-23T22:51:18.350Z",
      "assigned_agent": "default"
    },
    {
      "id": "01.02.03.02",
      "name": "Locate `--max-count 10` in `buildRetryRunCommand()` function in opencode.ts and change to `--max-count 20`",
      "stage_name": "Foundation",
      "batch_name": "Parser, Skill, and Session Capacity",
      "thread_name": "Double Session Listing",
      "status": "pending",
      "created_at": "2026-01-23T22:51:18.350Z",
      "updated_at": "2026-01-23T22:51:18.350Z",
      "assigned_agent": "default"
    },
    {
      "id": "01.02.03.03",
      "name": "Run existing tests to verify the changes don't break session listing functionality",
      "stage_name": "Foundation",
      "batch_name": "Parser, Skill, and Session Capacity",
      "thread_name": "Double Session Listing",
      "status": "pending",
      "created_at": "2026-01-23T22:51:18.350Z",
      "updated_at": "2026-01-23T22:51:18.350Z",
      "assigned_agent": "default"
    },
    {
      "id": "02.01.01.01",
      "name": "Add `getSynthesisOutputPath(streamId: string, threadId: string)` helper function returning `/tmp/workstream-{streamId}-{threadId}-synthesis.txt`",
      "stage_name": "Integration",
      "batch_name": "Command and Session Building",
      "thread_name": "Synthesis Command Builder",
      "status": "pending",
      "created_at": "2026-01-23T22:51:18.350Z",
      "updated_at": "2026-01-23T22:51:18.350Z",
      "assigned_agent": "systems-engineer"
    },
    {
      "id": "02.01.01.02",
      "name": "Create `buildSynthesisRunCommand()` function that internally calls `buildRetryRunCommand()` and wraps it with synthesis agent execution",
      "stage_name": "Integration",
      "batch_name": "Command and Session Building",
      "thread_name": "Synthesis Command Builder",
      "status": "pending",
      "created_at": "2026-01-23T22:51:18.350Z",
      "updated_at": "2026-01-23T22:51:18.350Z",
      "assigned_agent": "systems-engineer"
    },
    {
      "id": "02.01.01.03",
      "name": "Generate unique tracking IDs for both synthesis and working agents within the command builder",
      "stage_name": "Integration",
      "batch_name": "Command and Session Building",
      "thread_name": "Synthesis Command Builder",
      "status": "pending",
      "created_at": "2026-01-23T22:51:18.350Z",
      "updated_at": "2026-01-23T22:51:18.350Z",
      "assigned_agent": "systems-engineer"
    },
    {
      "id": "02.01.01.04",
      "name": "Construct the synthesis prompt that instructs the synthesis agent to run the working agent command, wait for completion, then summarize",
      "stage_name": "Integration",
      "batch_name": "Command and Session Building",
      "thread_name": "Synthesis Command Builder",
      "status": "pending",
      "created_at": "2026-01-23T22:51:18.350Z",
      "updated_at": "2026-01-23T22:51:18.350Z",
      "assigned_agent": "systems-engineer"
    },
    {
      "id": "02.01.01.05",
      "name": "Add error handling for synthesis agent failure that still captures working agent session ID if available",
      "stage_name": "Integration",
      "batch_name": "Command and Session Building",
      "thread_name": "Synthesis Command Builder",
      "status": "pending",
      "created_at": "2026-01-23T22:51:18.350Z",
      "updated_at": "2026-01-23T22:51:18.350Z",
      "assigned_agent": "systems-engineer"
    },
    {
      "id": "02.01.02.01",
      "name": "Add `setWorkingAgentSessionId(repoRoot, streamId, threadId, sessionId)` function to threads.ts",
      "stage_name": "Integration",
      "batch_name": "Command and Session Building",
      "thread_name": "Working Session Tracker",
      "status": "pending",
      "created_at": "2026-01-23T22:51:18.350Z",
      "updated_at": "2026-01-23T22:51:18.350Z",
      "assigned_agent": "systems-engineer"
    },
    {
      "id": "02.01.02.02",
      "name": "Add `getWorkingAgentSessionId(repoRoot, streamId, threadId)` function to threads.ts",
      "stage_name": "Integration",
      "batch_name": "Command and Session Building",
      "thread_name": "Working Session Tracker",
      "status": "pending",
      "created_at": "2026-01-23T22:51:18.350Z",
      "updated_at": "2026-01-23T22:51:18.350Z",
      "assigned_agent": "systems-engineer"
    },
    {
      "id": "02.01.02.03",
      "name": "Update the session close handler in multi.ts to capture and store both synthesis and working agent session IDs",
      "stage_name": "Integration",
      "batch_name": "Command and Session Building",
      "thread_name": "Working Session Tracker",
      "status": "pending",
      "created_at": "2026-01-23T22:51:18.350Z",
      "updated_at": "2026-01-23T22:51:18.350Z",
      "assigned_agent": "systems-engineer"
    },
    {
      "id": "02.01.02.04",
      "name": "Ensure `work fix --resume` uses `workingAgentSessionId` when available, falling back to `opencodeSessionId`",
      "stage_name": "Integration",
      "batch_name": "Command and Session Building",
      "thread_name": "Working Session Tracker",
      "status": "pending",
      "created_at": "2026-01-23T22:51:18.350Z",
      "updated_at": "2026-01-23T22:51:18.350Z",
      "assigned_agent": "systems-engineer"
    },
    {
      "id": "02.02.01.01",
      "name": "Load synthesis agent config using `getDefaultSynthesisAgent()` in multi.ts main function",
      "stage_name": "Integration",
      "batch_name": "Multi Integration",
      "thread_name": "Multi Orchestrator Update",
      "status": "pending",
      "created_at": "2026-01-23T22:51:18.350Z",
      "updated_at": "2026-01-23T22:51:18.350Z",
      "assigned_agent": "systems-engineer"
    },
    {
      "id": "02.02.01.02",
      "name": "Add conditional logic to use `buildSynthesisRunCommand()` instead of `buildRetryRunCommand()` when synthesis agent exists",
      "stage_name": "Integration",
      "batch_name": "Multi Integration",
      "thread_name": "Multi Orchestrator Update",
      "status": "pending",
      "created_at": "2026-01-23T22:51:18.350Z",
      "updated_at": "2026-01-23T22:51:18.350Z",
      "assigned_agent": "systems-engineer"
    },
    {
      "id": "02.02.01.03",
      "name": "Extend `ThreadInfo` interface in collectThreadInfoFromTasks to include optional `synthesisAgentName` and `synthesisModels` fields",
      "stage_name": "Integration",
      "batch_name": "Multi Integration",
      "thread_name": "Multi Orchestrator Update",
      "status": "pending",
      "created_at": "2026-01-23T22:51:18.350Z",
      "updated_at": "2026-01-23T22:51:18.350Z",
      "assigned_agent": "systems-engineer"
    },
    {
      "id": "02.02.01.04",
      "name": "Update `setupTmuxSession()` to handle synthesis-wrapped commands",
      "stage_name": "Integration",
      "batch_name": "Multi Integration",
      "thread_name": "Multi Orchestrator Update",
      "status": "pending",
      "created_at": "2026-01-23T22:51:18.350Z",
      "updated_at": "2026-01-23T22:51:18.350Z",
      "assigned_agent": "systems-engineer"
    },
    {
      "id": "02.02.01.05",
      "name": "Verify session close handler correctly stores working agent session ID to threads.json",
      "stage_name": "Integration",
      "batch_name": "Multi Integration",
      "thread_name": "Multi Orchestrator Update",
      "status": "pending",
      "created_at": "2026-01-23T22:51:18.350Z",
      "updated_at": "2026-01-23T22:51:18.350Z",
      "assigned_agent": "systems-engineer"
    },
    {
      "id": "02.02.02.01",
      "name": "Modify `handleSessionClose()` in multi.ts to read synthesis output from temp file using `getSynthesisOutputPath()`",
      "stage_name": "Integration",
      "batch_name": "Multi Integration",
      "thread_name": "Synthesis Output Storage",
      "status": "pending",
      "created_at": "2026-01-23T22:51:18.350Z",
      "updated_at": "2026-01-23T22:51:18.350Z",
      "assigned_agent": "systems-engineer"
    },
    {
      "id": "02.02.02.02",
      "name": "Call `updateThreadMetadataLocked()` with synthesisOutput field after reading the temp file",
      "stage_name": "Integration",
      "batch_name": "Multi Integration",
      "thread_name": "Synthesis Output Storage",
      "status": "pending",
      "created_at": "2026-01-23T22:51:18.350Z",
      "updated_at": "2026-01-23T22:51:18.350Z",
      "assigned_agent": "systems-engineer"
    },
    {
      "id": "02.02.02.03",
      "name": "Add warning logging for empty or missing synthesis output files without failing the thread",
      "stage_name": "Integration",
      "batch_name": "Multi Integration",
      "thread_name": "Synthesis Output Storage",
      "status": "pending",
      "created_at": "2026-01-23T22:51:18.350Z",
      "updated_at": "2026-01-23T22:51:18.350Z",
      "assigned_agent": "systems-engineer"
    },
    {
      "id": "02.02.02.04",
      "name": "Add cleanup logic for synthesis output temp files in marker-polling.ts",
      "stage_name": "Integration",
      "batch_name": "Multi Integration",
      "thread_name": "Synthesis Output Storage",
      "status": "pending",
      "created_at": "2026-01-23T22:51:18.350Z",
      "updated_at": "2026-01-23T22:51:18.350Z",
      "assigned_agent": "systems-engineer"
    },
    {
      "id": "03.01.01.01",
      "name": "Add private `queue: string[]` array and `isPlaying: boolean` flag to MacOSSoundProvider class",
      "stage_name": "Notification Enhancements",
      "batch_name": "Notification Enhancements",
      "thread_name": "Sound Queue Implementation",
      "status": "pending",
      "created_at": "2026-01-23T22:51:18.350Z",
      "updated_at": "2026-01-23T22:51:18.350Z",
      "assigned_agent": "systems-engineer"
    },
    {
      "id": "03.01.01.02",
      "name": "Modify `playNotification()` method to push sounds to queue instead of spawning immediately",
      "stage_name": "Notification Enhancements",
      "batch_name": "Notification Enhancements",
      "thread_name": "Sound Queue Implementation",
      "status": "pending",
      "created_at": "2026-01-23T22:51:18.350Z",
      "updated_at": "2026-01-23T22:51:18.350Z",
      "assigned_agent": "systems-engineer"
    },
    {
      "id": "03.01.01.03",
      "name": "Implement `playNext()` private method to play the next sound from queue when current sound finishes",
      "stage_name": "Notification Enhancements",
      "batch_name": "Notification Enhancements",
      "thread_name": "Sound Queue Implementation",
      "status": "pending",
      "created_at": "2026-01-23T22:51:18.350Z",
      "updated_at": "2026-01-23T22:51:18.350Z",
      "assigned_agent": "systems-engineer"
    },
    {
      "id": "03.01.01.04",
      "name": "Hook into afplay's exit event to trigger `playNext()` for sequential sound playback",
      "stage_name": "Notification Enhancements",
      "batch_name": "Notification Enhancements",
      "thread_name": "Sound Queue Implementation",
      "status": "pending",
      "created_at": "2026-01-23T22:51:18.350Z",
      "updated_at": "2026-01-23T22:51:18.350Z",
      "assigned_agent": "systems-engineer"
    },
    {
      "id": "03.01.01.05",
      "name": "Write unit tests for the sound queue to verify sequential playback behavior",
      "stage_name": "Notification Enhancements",
      "batch_name": "Notification Enhancements",
      "thread_name": "Sound Queue Implementation",
      "status": "pending",
      "created_at": "2026-01-23T22:51:18.350Z",
      "updated_at": "2026-01-23T22:51:18.350Z",
      "assigned_agent": "systems-engineer"
    },
    {
      "id": "03.01.02.01",
      "name": "Add new `thread_synthesis_complete` event type to NotificationEvent type definition",
      "stage_name": "Notification Enhancements",
      "batch_name": "Notification Enhancements",
      "thread_name": "Notification Payload Extension",
      "status": "pending",
      "created_at": "2026-01-23T22:51:18.350Z",
      "updated_at": "2026-01-23T22:51:18.350Z",
      "assigned_agent": "systems-engineer"
    },
    {
      "id": "03.01.02.02",
      "name": "Add optional `metadata` parameter to `playNotification()` method for passing synthesis output",
      "stage_name": "Notification Enhancements",
      "batch_name": "Notification Enhancements",
      "thread_name": "Notification Payload Extension",
      "status": "pending",
      "created_at": "2026-01-23T22:51:18.350Z",
      "updated_at": "2026-01-23T22:51:18.350Z",
      "assigned_agent": "systems-engineer"
    },
    {
      "id": "03.01.02.03",
      "name": "Extend `WebhookPayload` interface to include optional `synthesisOutput` field",
      "stage_name": "Notification Enhancements",
      "batch_name": "Notification Enhancements",
      "thread_name": "Notification Payload Extension",
      "status": "pending",
      "created_at": "2026-01-23T22:51:18.350Z",
      "updated_at": "2026-01-23T22:51:18.350Z",
      "assigned_agent": "systems-engineer"
    },
    {
      "id": "03.01.02.04",
      "name": "Update `NotificationTracker` to accept and pass through synthesis data to providers",
      "stage_name": "Notification Enhancements",
      "batch_name": "Notification Enhancements",
      "thread_name": "Notification Payload Extension",
      "status": "pending",
      "created_at": "2026-01-23T22:51:18.350Z",
      "updated_at": "2026-01-23T22:51:18.350Z",
      "assigned_agent": "systems-engineer"
    },
    {
      "id": "03.01.02.05",
      "name": "Add `playSynthesisComplete(threadId: string, synthesisOutput: string)` helper method to NotificationManager",
      "stage_name": "Notification Enhancements",
      "batch_name": "Notification Enhancements",
      "thread_name": "Notification Payload Extension",
      "status": "pending",
      "created_at": "2026-01-23T22:51:18.350Z",
      "updated_at": "2026-01-23T22:51:18.350Z",
      "assigned_agent": "systems-engineer"
    },
    {
      "id": "04.01.01.01",
      "name": "Update synthesizing-workstreams SKILL.md with complete usage instructions and examples",
      "stage_name": "Documentation",
      "batch_name": "Documentation",
      "thread_name": "Documentation Updates",
      "status": "pending",
      "created_at": "2026-01-23T22:51:18.350Z",
      "updated_at": "2026-01-23T22:51:18.350Z",
      "assigned_agent": "documentation-minimalist"
    },
    {
      "id": "04.01.01.02",
      "name": "Add JSDoc comments to new functions in agents-yaml.ts (getSynthesisAgent, getDefaultSynthesisAgent, parseAgentsYaml changes)",
      "stage_name": "Documentation",
      "batch_name": "Documentation",
      "thread_name": "Documentation Updates",
      "status": "pending",
      "created_at": "2026-01-23T22:51:18.350Z",
      "updated_at": "2026-01-23T22:51:18.350Z",
      "assigned_agent": "documentation-minimalist"
    },
    {
      "id": "04.01.01.03",
      "name": "Add JSDoc comments to new functions in opencode.ts (buildSynthesisRunCommand, getSynthesisOutputPath)",
      "stage_name": "Documentation",
      "batch_name": "Documentation",
      "thread_name": "Documentation Updates",
      "status": "pending",
      "created_at": "2026-01-23T22:51:18.350Z",
      "updated_at": "2026-01-23T22:51:18.350Z",
      "assigned_agent": "documentation-minimalist"
    },
    {
      "id": "04.01.01.04",
      "name": "Add JSDoc comments to new functions in threads.ts (setWorkingAgentSessionId, getWorkingAgentSessionId)",
      "stage_name": "Documentation",
      "batch_name": "Documentation",
      "thread_name": "Documentation Updates",
      "status": "pending",
      "created_at": "2026-01-23T22:51:18.350Z",
      "updated_at": "2026-01-23T22:51:18.350Z",
      "assigned_agent": "documentation-minimalist"
    },
    {
      "id": "04.01.01.05",
      "name": "Document the agents.yaml schema for synthesis_agents section with example configuration in code comments",
      "stage_name": "Documentation",
      "batch_name": "Documentation",
      "thread_name": "Documentation Updates",
      "status": "pending",
      "created_at": "2026-01-23T22:51:18.350Z",
      "updated_at": "2026-01-23T22:51:18.350Z",
      "assigned_agent": "documentation-minimalist"
    }
  ]
}